using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading;
using System.Windows.Forms;

namespace MarketInfoSys
{
    public partial class ControlPanel : Form
    {
        webservice service = new webservice();
         
        private delegate void ProxyClient();

        public ControlPanel()
        {
            InitializeComponent();
            btnSubmit.Click += btnSubmit_Click;
            this.FormClosed += ControlPanel_FormClosed;
            //this.rtbSubscribe.Text = "510050.sh\n601288.sh\nIH1603.cf\n600000.sh\n600010.sh\n600015.sh\n600016.sh\n600018.sh\n600028.sh\n600030.sh\n600036.sh\n600048.sh\n600050.sh\n600089.sh\n600104.sh\n600109.sh\n600111.sh\n600150.sh\n600256.sh\n600406.sh\n600518.sh\n600519.sh\n600583.sh\n600585.sh\n600637.sh\n600690.sh\n600837.sh\n600887.sh\n600893.sh\n600958.sh\n600999.sh\n601006.sh\n601088.sh\n601166.sh\n601169.sh\n601186.sh\n601288.sh\n601318.sh\n601328.sh\n601390.sh\n601398.sh\n601601.sh\n601628.sh\n601668.sh\n601688.sh\n601766.sh\n601800.sh\n601818.sh\n601857.sh\n601901.sh\n601988.sh\n601989.sh\n601998.sh\n";
            this.rtbSubscribe.Text = "000001.sz\n000002.sz\n000004.sz\n000005.sz\n000006.sz\n000007.sz\n000008.sz\n000009.sz\n000010.sz\n000011.sz\n000012.sz\n000014.sz\n000016.sz\n000017.sz\n000018.sz\n000019.sz\n000020.sz\n000021.sz\n000022.sz\n000023.sz\n000025.sz\n000026.sz\n000027.sz\n000028.sz\n000029.sz\n000030.sz\n000031.sz\n000032.sz\n000033.sz\n000034.sz\n000035.sz\n000036.sz\n000037.sz\n000038.sz\n000039.sz\n000040.sz\n000042.sz\n000043.sz\n000045.sz\n000046.sz\n000048.sz\n000049.sz\n000050.sz\n000055.sz\n000056.sz\n000058.sz\n000059.sz\n000060.sz\n000061.sz\n000062.sz\n000063.sz\n000065.sz\n000066.sz\n000068.sz\n000069.sz\n000070.sz\n000078.sz\n000088.sz\n000089.sz\n000090.sz\n000096.sz\n000099.sz\n000100.sz\n000150.sz\n000151.sz\n000153.sz\n000155.sz\n000156.sz\n000157.sz\n000158.sz\n000159.sz\n000166.sz\n000301.sz\n000333.sz\n000338.sz\n000400.sz\n000401.sz\n000402.sz\n000403.sz\n000404.sz\n000407.sz\n000408.sz\n000409.sz\n000410.sz\n000411.sz\n000413.sz\n000415.sz\n000416.sz\n000417.sz\n000418.sz\n000419.sz\n000420.sz\n000421.sz\n000422.sz\n000423.sz\n000425.sz\n000426.sz\n000428.sz\n000429.sz\n000430.sz\n000488.sz\n000498.sz\n000501.sz\n000502.sz\n000503.sz\n000504.sz\n000505.sz\n000506.sz\n000507.sz\n000509.sz\n000510.sz\n000511.sz\n000513.sz\n000514.sz\n000516.sz\n000517.sz\n000518.sz\n000519.sz\n000520.sz\n000521.sz\n000523.sz\n000524.sz\n000525.sz\n000526.sz\n000528.sz\n000529.sz\n000530.sz\n000531.sz\n000532.sz\n000533.sz\n000534.sz\n000536.sz\n000537.sz\n000538.sz\n000539.sz\n000540.sz\n000541.sz\n000543.sz\n000544.sz\n000545.sz\n000546.sz\n000547.sz\n000548.sz\n000550.sz\n000551.sz\n000552.sz\n000553.sz\n000554.sz\n000555.sz\n000557.sz\n000558.sz\n000559.sz\n000560.sz\n000561.sz\n000563.sz\n000564.sz\n000565.sz\n000566.sz\n000567.sz\n000568.sz\n000570.sz\n000571.sz\n000572.sz\n000573.sz\n000576.sz\n000581.sz\n000582.sz\n000584.sz\n000585.sz\n000586.sz\n000587.sz\n000589.sz\n000590.sz\n000591.sz\n000592.sz\n000593.sz\n000595.sz\n000596.sz\n000597.sz\n000598.sz\n000599.sz\n000600.sz\n000601.sz\n000603.sz\n000605.sz\n000606.sz\n000607.sz\n000608.sz\n000609.sz\n000610.sz\n000611.sz\n000612.sz\n000613.sz\n000615.sz\n000616.sz\n000617.sz\n000619.sz\n000620.sz\n000622.sz\n000623.sz\n000625.sz\n000626.sz\n000627.sz\n000628.sz\n000629.sz\n000630.sz\n000631.sz\n000632.sz\n000633.sz\n000635.sz\n000636.sz\n000637.sz\n000638.sz\n000639.sz\n000650.sz\n000651.sz\n000652.sz\n000655.sz\n000656.sz\n000657.sz\n000659.sz\n000661.sz\n000662.sz\n000663.sz\n000665.sz\n000666.sz\n000667.sz\n000668.sz\n000669.sz\n000670.sz\n000671.sz\n000672.sz\n000673.sz\n000676.sz\n000677.sz\n000678.sz\n000679.sz\n000680.sz\n000681.sz\n000682.sz\n000683.sz\n000685.sz\n000686.sz\n000687.sz\n000688.sz\n000690.sz\n000691.sz\n000692.sz\n000693.sz\n000695.sz\n000697.sz\n000698.sz\n000700.sz\n000701.sz\n000702.sz\n000703.sz\n000705.sz\n000707.sz\n000708.sz\n000709.sz\n000710.sz\n000711.sz\n000712.sz\n000713.sz\n000715.sz\n000716.sz\n000717.sz\n000718.sz\n000719.sz\n000720.sz\n000721.sz\n000722.sz\n000723.sz\n000725.sz\n000726.sz\n000727.sz\n000728.sz\n000729.sz\n000731.sz\n000732.sz\n000733.sz\n000735.sz\n000736.sz\n000737.sz\n000738.sz\n000739.sz\n000748.sz\n000750.sz\n000751.sz\n000752.sz\n000753.sz\n000755.sz\n000756.sz\n000757.sz\n000758.sz\n000759.sz\n000760.sz\n000761.sz\n000762.sz\n000766.sz\n000767.sz\n000768.sz\n000776.sz\n000777.sz\n000778.sz\n000779.sz\n000780.sz\n000782.sz\n000783.sz\n000785.sz\n000786.sz\n000788.sz\n000789.sz\n000790.sz\n000791.sz\n000792.sz\n000793.sz\n000795.sz\n000796.sz\n000797.sz\n000798.sz\n000799.sz\n000800.sz\n000801.sz\n000802.sz\n000803.sz\n000806.sz\n000807.sz\n000809.sz\n000810.sz\n000811.sz\n000812.sz\n000813.sz\n000815.sz\n000816.sz\n000818.sz\n000819.sz\n000820.sz\n000821.sz\n000822.sz\n000823.sz\n000825.sz\n000826.sz\n000828.sz\n000829.sz\n000830.sz\n000831.sz\n000833.sz\n000835.sz\n000836.sz\n000837.sz\n000838.sz\n000839.sz\n000848.sz\n000850.sz\n000851.sz\n000852.sz\n000856.sz\n000858.sz\n000859.sz\n000860.sz\n000861.sz\n000862.sz\n000863.sz\n000868.sz\n000869.sz\n000875.sz\n000876.sz\n000877.sz\n000878.sz\n000880.sz\n000881.sz\n000882.sz\n000883.sz\n000885.sz\n000886.sz\n000887.sz\n000888.sz\n000889.sz\n000890.sz\n000892.sz\n000893.sz\n000895.sz\n000897.sz\n000898.sz\n000899.sz\n000900.sz\n000901.sz\n000902.sz\n000903.sz\n000905.sz\n000906.sz\n000908.sz\n000909.sz\n000910.sz\n000911.sz\n000912.sz\n000913.sz\n000915.sz\n000916.sz\n000917.sz\n000918.sz\n000919.sz\n000920.sz\n000921.sz\n000922.sz\n000923.sz\n000925.sz\n000926.sz\n000927.sz\n000928.sz\n000929.sz\n000930.sz\n000931.sz\n000932.sz\n000933.sz\n000935.sz\n000936.sz\n000937.sz\n000938.sz\n000939.sz\n000948.sz\n000949.sz\n000950.sz\n000951.sz\n000952.sz\n000953.sz\n000955.sz\n000957.sz\n000958.sz\n000959.sz\n000960.sz\n000961.sz\n000962.sz\n000963.sz\n000965.sz\n000966.sz\n000967.sz\n000968.sz\n000969.sz\n000970.sz\n000971.sz\n000972.sz\n000973.sz\n000975.sz\n000976.sz\n000977.sz\n000978.sz\n000979.sz\n000980.sz\n000981.sz\n000982.sz\n000983.sz\n000985.sz\n000987.sz\n000988.sz\n000989.sz\n000990.sz\n000993.sz\n000995.sz\n000996.sz\n000997.sz\n000998.sz\n000999.sz\n001696.sz\n001896.sz\n001979.sz\n200011.sz\n200012.sz\n200016.sz\n200017.sz\n200018.sz\n200019.sz\n200020.sz\n200022.sz\n200025.sz\n200026.sz\n200028.sz\n200029.sz\n200030.sz\n200037.sz\n200045.sz\n200053.sz\n200054.sz\n200055.sz\n200056.sz\n200058.sz\n200152.sz\n200160.sz\n200168.sz\n200413.sz\n200418.sz\n200429.sz\n200468.sz\n200488.sz\n200505.sz\n200512.sz\n200521.sz\n200530.sz\n200539.sz\n200541.sz\n200550.sz\n200553.sz\n200570.sz\n200581.sz\n200596.sz\n200613.sz\n200625.sz\n200706.sz\n200725.sz\n200726.sz\n200761.sz\n200771.sz\n200869.sz\n200986.sz\n200992.sz\n600000.sh\n600004.sh\n600005.sh\n600006.sh\n600007.sh\n600008.sh\n600009.sh\n600010.sh\n600011.sh\n600012.sh\n600015.sh\n600016.sh\n600017.sh\n600018.sh\n600019.sh\n600020.sh\n600021.sh\n600022.sh\n600023.sh\n600026.sh\n600027.sh\n600028.sh\n600029.sh\n600030.sh\n600031.sh\n600033.sh\n600035.sh\n600036.sh\n600037.sh\n600038.sh\n600039.sh\n600048.sh\n600050.sh\n600051.sh\n600052.sh\n600053.sh\n600054.sh\n600055.sh\n600056.sh\n600057.sh\n600058.sh\n600059.sh\n600060.sh\n600061.sh\n600062.sh\n600063.sh\n600064.sh\n600066.sh\n600067.sh\n600068.sh\n600069.sh\n600070.sh\n600071.sh\n600072.sh\n600073.sh\n600074.sh\n600075.sh\n600076.sh\n600077.sh\n600078.sh\n600079.sh\n600080.sh\n600081.sh\n600082.sh\n600083.sh\n600084.sh\n600085.sh\n600086.sh\n600088.sh\n600089.sh\n600090.sh\n600091.sh\n600093.sh\n600094.sh\n600095.sh\n600096.sh\n600097.sh\n600098.sh\n600099.sh\n600100.sh\n600101.sh\n600103.sh\n600104.sh\n600105.sh\n600106.sh\n600107.sh\n600108.sh\n600109.sh\n600110.sh\n600111.sh\n600112.sh\n600113.sh\n600114.sh\n600115.sh\n600116.sh\n600117.sh\n600118.sh\n600119.sh\n600120.sh\n600121.sh\n600122.sh\n600123.sh\n600125.sh\n600126.sh\n600127.sh\n600128.sh\n600129.sh\n600130.sh\n600131.sh\n600132.sh\n600133.sh\n600135.sh\n600136.sh\n600137.sh\n600138.sh\n600139.sh\n600141.sh\n600143.sh\n600145.sh\n600146.sh\n600148.sh\n600149.sh\n600150.sh\n600151.sh\n600152.sh\n600153.sh\n600155.sh\n600156.sh\n600157.sh\n600158.sh\n600159.sh\n600160.sh\n600161.sh\n600162.sh\n600163.sh\n600165.sh\n600166.sh\n600167.sh\n600168.sh\n600169.sh\n600170.sh\n600171.sh\n600172.sh\n600173.sh\n600175.sh\n600176.sh\n600177.sh\n600178.sh\n600179.sh\n600180.sh\n600182.sh\n600183.sh\n600184.sh\n600185.sh\n600186.sh\n600187.sh\n600188.sh\n600189.sh\n600190.sh\n600191.sh\n600192.sh\n600193.sh\n600195.sh\n600196.sh\n600197.sh\n600198.sh\n600199.sh\n600200.sh\n600201.sh\n600202.sh\n600203.sh\n600206.sh\n600207.sh\n600208.sh\n600209.sh\n600210.sh\n600211.sh\n600212.sh\n600213.sh\n600215.sh\n600216.sh\n600217.sh\n600218.sh\n600219.sh\n600220.sh\n600221.sh\n600222.sh\n600223.sh\n600225.sh\n600226.sh\n600227.sh\n600228.sh\n600229.sh\n600230.sh\n600231.sh\n600232.sh\n600233.sh\n600234.sh\n600235.sh\n600236.sh\n600237.sh\n600238.sh\n600239.sh\n600240.sh\n600241.sh\n600242.sh\n600243.sh\n600246.sh\n600247.sh\n600248.sh\n600249.sh\n600250.sh\n600251.sh\n600252.sh\n600255.sh\n600256.sh\n600257.sh\n600258.sh\n600259.sh\n600260.sh\n600261.sh\n600262.sh\n600265.sh\n600266.sh\n600267.sh\n600268.sh\n600269.sh\n600270.sh\n600271.sh\n600272.sh\n600273.sh\n600275.sh\n600276.sh\n600277.sh\n600278.sh\n600279.sh\n600280.sh\n600281.sh\n600282.sh\n600283.sh\n600284.sh\n600285.sh\n600287.sh\n600288.sh\n600289.sh\n600290.sh\n600291.sh\n600292.sh\n600293.sh\n600295.sh\n600297.sh\n600298.sh\n600299.sh\n600300.sh\n600301.sh\n600302.sh\n600303.sh\n600305.sh\n600306.sh\n600307.sh\n600308.sh\n600309.sh\n600310.sh\n600311.sh\n600312.sh\n600313.sh\n600315.sh\n600316.sh\n600317.sh\n600318.sh\n600319.sh\n600320.sh\n600321.sh\n600322.sh\n600323.sh\n600325.sh\n600326.sh\n600327.sh\n600328.sh\n600329.sh\n600330.sh\n600331.sh\n600332.sh\n600333.sh\n600335.sh\n600336.sh\n600337.sh\n600338.sh\n600339.sh\n600340.sh\n600343.sh\n600345.sh\n600346.sh\n600348.sh\n600350.sh\n600351.sh\n600352.sh\n600353.sh\n600354.sh\n600355.sh\n600356.sh\n600358.sh\n600359.sh\n600360.sh\n600361.sh\n600362.sh\n600363.sh\n600365.sh\n600366.sh\n600367.sh\n600368.sh\n600369.sh\n600370.sh\n600371.sh\n600372.sh\n600373.sh\n600375.sh\n600376.sh\n600377.sh\n600378.sh\n600379.sh\n600380.sh\n600381.sh\n600382.sh\n600383.sh\n600385.sh\n600386.sh\n600387.sh\n600388.sh\n600389.sh\n600390.sh\n600391.sh\n600392.sh\n600393.sh\n600395.sh\n600396.sh\n600397.sh\n600398.sh\n600399.sh\n600400.sh\n600401.sh\n600403.sh\n600405.sh\n600406.sh\n600408.sh\n600409.sh\n600410.sh\n600415.sh\n600416.sh\n600418.sh\n600419.sh\n600420.sh\n600421.sh\n600422.sh\n600423.sh\n600425.sh\n600426.sh\n600428.sh\n600429.sh\n600432.sh\n600433.sh\n600435.sh\n600436.sh\n600438.sh\n600439.sh\n600444.sh\n600446.sh\n600448.sh\n600449.sh\n600452.sh\n600455.sh\n600456.sh\n600458.sh\n600459.sh\n600460.sh\n600461.sh\n600462.sh\n600463.sh\n600466.sh\n600467.sh\n600468.sh\n600469.sh\n600470.sh\n600475.sh\n600476.sh\n600477.sh\n600478.sh\n600479.sh\n600480.sh\n600481.sh\n600482.sh\n600483.sh\n600485.sh\n600486.sh\n600487.sh\n600488.sh\n600489.sh\n600490.sh\n600491.sh\n600493.sh\n600495.sh\n600496.sh\n600497.sh\n600498.sh\n600499.sh\n600500.sh\n600501.sh\n600502.sh\n600503.sh\n600505.sh\n600506.sh\n600507.sh\n600508.sh\n600509.sh\n600510.sh\n600511.sh\n600512.sh\n600513.sh\n600515.sh\n600516.sh\n600517.sh\n600518.sh\n600519.sh\n600520.sh\n600521.sh\n600522.sh\n600523.sh\n600525.sh\n600526.sh\n600527.sh\n600528.sh\n600529.sh\n600530.sh\n600531.sh\n600532.sh\n600533.sh\n600535.sh\n600536.sh\n600537.sh\n600538.sh\n600539.sh\n600540.sh\n600543.sh\n600545.sh\n600546.sh\n600547.sh\n600548.sh\n600549.sh\n600550.sh\n600551.sh\n600552.sh\n600555.sh\n600556.sh\n600557.sh\n600558.sh\n600559.sh\n600560.sh\n600561.sh\n600562.sh\n600563.sh\n600565.sh\n600566.sh\n600567.sh\n600568.sh\n600569.sh\n600570.sh\n600571.sh\n600572.sh\n600573.sh\n600575.sh\n600576.sh\n600577.sh\n600578.sh\n600579.sh\n600580.sh\n600581.sh\n600582.sh\n600583.sh\n600584.sh\n600585.sh\n600586.sh\n600587.sh\n600588.sh\n600589.sh\n600590.sh\n600592.sh\n600593.sh\n600594.sh\n600595.sh\n600596.sh\n600597.sh\n600598.sh\n600599.sh\n600600.sh\n600601.sh\n600602.sh\n600603.sh\n600604.sh\n600605.sh\n600606.sh\n600608.sh\n600609.sh\n600610.sh\n600611.sh\n600612.sh\n600613.sh\n600614.sh\n600615.sh\n600616.sh\n600617.sh\n600618.sh\n600619.sh\n600620.sh\n600621.sh\n600622.sh\n600623.sh\n600624.sh\n600626.sh\n600628.sh\n600629.sh\n600630.sh\n600633.sh\n600634.sh\n600635.sh\n600636.sh\n600637.sh\n600638.sh\n600639.sh\n600640.sh\n600641.sh\n600642.sh\n600643.sh\n600644.sh\n600645.sh\n600647.sh\n600648.sh\n600649.sh\n600650.sh\n600651.sh\n600652.sh\n600653.sh\n600654.sh\n600655.sh\n600657.sh\n600658.sh\n600660.sh\n600661.sh\n600662.sh\n600663.sh\n600664.sh\n600665.sh\n600666.sh\n600667.sh\n600668.sh\n600671.sh\n600673.sh\n600674.sh\n600675.sh\n600676.sh\n600677.sh\n600678.sh\n600679.sh\n600680.sh\n600681.sh\n600682.sh\n600683.sh\n600684.sh\n600685.sh\n600686.sh\n600687.sh\n600688.sh\n600689.sh\n600690.sh\n600691.sh\n600692.sh\n600693.sh\n600694.sh\n600695.sh\n600696.sh\n600697.sh\n600698.sh\n600699.sh\n600701.sh\n600702.sh\n600703.sh\n600704.sh\n600705.sh\n600706.sh\n600707.sh\n600708.sh\n600710.sh\n600711.sh\n600712.sh\n600713.sh\n600714.sh\n600715.sh\n600716.sh\n600717.sh\n600718.sh\n600719.sh\n600720.sh\n600721.sh\n600722.sh\n600723.sh\n600724.sh\n600725.sh\n600726.sh\n600727.sh\n600728.sh\n600729.sh\n600730.sh\n600731.sh\n600732.sh\n600733.sh\n600734.sh\n600735.sh\n600736.sh\n600737.sh\n600738.sh\n600739.sh\n600740.sh\n600741.sh\n600742.sh\n600743.sh\n600744.sh\n600745.sh\n600746.sh\n600747.sh\n600748.sh\n600749.sh\n600750.sh\n600751.sh\n600753.sh\n600754.sh\n600755.sh\n600756.sh\n600757.sh\n600758.sh\n600759.sh\n600760.sh\n600761.sh\n600763.sh\n600764.sh\n600765.sh\n600766.sh\n600767.sh\n600768.sh\n600769.sh\n600770.sh\n600771.sh\n600773.sh\n600774.sh\n600775.sh\n600776.sh\n600777.sh\n600778.sh\n600779.sh\n600780.sh\n600781.sh\n600782.sh\n600783.sh\n600784.sh\n600785.sh\n600787.sh\n600789.sh\n600790.sh\n600791.sh\n600792.sh\n600793.sh\n600794.sh\n600795.sh\n600796.sh\n600797.sh\n600798.sh\n600800.sh\n600801.sh\n600802.sh\n600803.sh\n600804.sh\n600805.sh\n600806.sh\n600807.sh\n600808.sh\n600809.sh\n600810.sh\n600811.sh\n600812.sh\n600814.sh\n600815.sh\n600816.sh\n600817.sh\n600818.sh\n600819.sh\n600820.sh\n600821.sh\n600822.sh\n600823.sh\n600824.sh\n600825.sh\n600826.sh\n600827.sh\n600828.sh\n600829.sh\n600830.sh\n600831.sh\n600833.sh\n600834.sh\n600835.sh\n600836.sh\n600837.sh\n600838.sh\n600839.sh\n600841.sh\n600843.sh\n600844.sh\n600845.sh\n600846.sh\n600847.sh\n600848.sh\n600850.sh\n600851.sh\n600853.sh\n600854.sh\n600855.sh\n600856.sh\n600857.sh\n600858.sh\n600859.sh\n600860.sh\n600861.sh\n600862.sh\n600863.sh\n600864.sh\n600865.sh\n600866.sh\n600867.sh\n600868.sh\n600869.sh\n600870.sh\n600871.sh\n600872.sh\n600873.sh\n600874.sh\n600875.sh\n600876.sh\n600877.sh\n600879.sh\n600880.sh\n600881.sh\n600882.sh\n600883.sh\n600884.sh\n600885.sh\n600886.sh\n600887.sh\n600888.sh\n600889.sh\n600890.sh\n600891.sh\n600892.sh\n600893.sh\n600894.sh\n600895.sh\n600896.sh\n600897.sh\n600898.sh\n600900.sh\n600917.sh\n600958.sh\n600959.sh\n600960.sh\n600961.sh\n600962.sh\n600963.sh\n600965.sh\n600966.sh\n600967.sh\n600969.sh\n600970.sh\n600971.sh\n600973.sh\n600975.sh\n600976.sh\n600978.sh\n600979.sh\n600980.sh\n600981.sh\n600982.sh\n600983.sh\n600984.sh\n600985.sh\n600986.sh\n600987.sh\n600988.sh\n600990.sh\n600992.sh\n600993.sh\n600995.sh\n600997.sh\n600998.sh\n600999.sh\n601000.sh\n601001.sh\n601002.sh\n601003.sh\n601005.sh\n601006.sh\n601007.sh\n601008.sh\n601009.sh\n601010.sh\n601011.sh\n601012.sh\n601015.sh\n601016.sh\n601018.sh\n601020.sh\n601021.sh\n601028.sh\n601038.sh\n601058.sh\n601069.sh\n601088.sh\n601098.sh\n601099.sh\n601100.sh\n601101.sh\n601106.sh\n601107.sh\n601111.sh\n601113.sh\n601116.sh\n601117.sh\n601118.sh\n601126.sh\n601137.sh\n601139.sh\n601155.sh\n601158.sh\n601166.sh\n601168.sh\n601169.sh\n601177.sh\n601179.sh\n601186.sh\n601188.sh\n601198.sh\n601199.sh\n601208.sh\n601211.sh\n601216.sh\n601218.sh\n601222.sh\n601225.sh\n601226.sh\n601231.sh\n601233.sh\n601238.sh\n601258.sh\n601288.sh\n601311.sh\n601313.sh\n601318.sh\n601328.sh\n601333.sh\n601336.sh\n601339.sh\n601368.sh\n601369.sh\n601377.sh\n601388.sh\n601390.sh\n601398.sh\n601515.sh\n601518.sh\n601519.sh\n601555.sh\n601558.sh\n601566.sh\n601567.sh\n601579.sh\n601588.sh\n601599.sh\n601600.sh\n601601.sh\n601607.sh\n601608.sh\n601616.sh\n601618.sh\n601628.sh\n601633.sh\n601636.sh\n601666.sh\n601668.sh\n601669.sh\n601677.sh\n601678.sh\n601688.sh\n601689.sh\n601699.sh\n601700.sh\n601717.sh\n601718.sh\n601727.sh\n601766.sh\n601777.sh\n601788.sh\n601789.sh\n601798.sh\n601799.sh\n601800.sh\n601801.sh\n601808.sh\n601818.sh\n601857.sh\n601866.sh\n601872.sh\n601877.sh\n601880.sh\n601886.sh\n601888.sh\n601890.sh\n601898.sh\n601899.sh\n601900.sh\n601901.sh\n601908.sh\n601918.sh\n601919.sh\n601928.sh\n601929.sh\n601933.sh\n601939.sh\n601958.sh\n601965.sh\n601968.sh\n601969.sh\n601985.sh\n601988.sh\n601989.sh\n601991.sh\n601992.sh\n601996.sh\n601998.sh\n601999.sh\n603000.sh\n603001.sh\n603002.sh\n603003.sh\n603005.sh\n603006.sh\n603008.sh\n603009.sh\n603010.sh\n603011.sh\n603012.sh\n603015.sh\n603017.sh\n603018.sh\n603019.sh\n603020.sh\n603021.sh\n603022.sh\n603023.sh\n603025.sh\n603026.sh\n603027.sh\n603028.sh\n603029.sh\n603030.sh\n603066.sh\n603077.sh\n603085.sh\n603088.sh\n603099.sh\n603100.sh\n603101.sh\n603108.sh\n603111.sh\n603116.sh\n603117.sh\n603118.sh\n603123.sh\n603126.sh\n603128.sh\n603158.sh\n603166.sh\n603167.sh\n603168.sh\n603169.sh\n603188.sh\n603198.sh\n603199.sh\n603222.sh\n603223.sh\n603227.sh\n603268.sh\n603288.sh\n603299.sh\n603300.sh\n603306.sh\n603308.sh\n603309.sh\n603311.sh\n603315.sh\n603318.sh\n603328.sh\n603333.sh\n603338.sh\n603355.sh\n603366.sh\n603368.sh\n603369.sh\n603377.sh\n603398.sh\n603399.sh\n603456.sh\n603508.sh\n603518.sh\n603519.sh\n603520.sh\n603528.sh\n603555.sh\n603558.sh\n603566.sh\n603567.sh\n603568.sh\n603588.sh\n603589.sh\n603598.sh\n603599.sh\n603600.sh\n603601.sh\n603606.sh\n603608.sh\n603609.sh\n603611.sh\n603616.sh\n603618.sh\n603636.sh\n603669.sh\n603678.sh\n603686.sh\n603688.sh\n603696.sh\n603698.sh\n603699.sh\n603701.sh\n603703.sh\n603718.sh\n603726.sh\n603729.sh\n603766.sh\n603778.sh\n603779.sh\n603788.sh\n603789.sh\n603798.sh\n603799.sh\n603800.sh\n603806.sh\n603808.sh\n603818.sh\n603822.sh\n603828.sh\n603838.sh\n603861.sh\n603866.sh\n603868.sh\n603869.sh\n603883.sh\n603885.sh\n603889.sh\n603898.sh\n603899.sh\n603901.sh\n603918.sh\n603919.sh\n603936.sh\n603939.sh\n603959.sh\n603968.sh\n603969.sh\n603979.sh\n603988.sh\n603989.sh\n603993.sh\n603996.sh\n603997.sh\n603998.sh\n603999.sh\n";
            //this.rtbSubscribe.Text = "600518.sh";
            updateCount.Start();
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        void ControlPanel_FormClosed(object sender, FormClosedEventArgs e)
        {
            webservice.abort();
            webservice.STOP = true;

        }

        /// <summary>
        /// 启动或停止运行
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        void btnSubmit_Click(object sender, EventArgs e)
        {
            if (this.btnSubmit.Text == "启动运行")
            {
                TDFMain.ip = tbip.Text.Trim();
                TDFMain.port = tbport.Text.Trim();
                TDFMain.userName = tbuserName.Text.Trim();
                TDFMain.password = tbpassword.Text.Trim();
                TDFMain.subscribeList = rtbSubscribe.Text.Trim();

                this.btnSubmit.Text = "停止运行";

                if (webservice.STOP == true)
                {
                    webservice.STOP = false;
                    webservice.run();

                }
                else
                {
                    webservice.resume();
                }
            }
            else
            {
                this.btnSubmit.Text = "启动运行";
                webservice.suspend();
                
            }
        }

        private void updateCount_Tick(object sender, EventArgs e)
        {
            this.QueueLength.Text = "目前队列长度:" +  webservice.GetLength().ToString();

            if (Queue_Data.Connected)
            {
                this.login.Text = "已连接";
            }
            else
            {
                this.login.Text = "未连接";
            }
        }

        private void checkBox1_CheckedChanged(object sender, EventArgs e)
        {
            simulate_trade.SimSwitch = ((CheckBox)sender).Checked;
        }

        private void checkBox2_CheckedChanged(object sender, EventArgs e)
        {
            simulate_trade.MarketRecorder = ((CheckBox)sender).Checked;
            MessageBox.Show("行情记录开启，行情信息直接存盘，不会发出。");
        }
    }
}
